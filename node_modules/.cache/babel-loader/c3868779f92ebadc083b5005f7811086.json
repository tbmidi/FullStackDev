{"ast":null,"code":"import Api from '../../api/Api';\nimport { onMounted, computed, reactive } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport Swal from 'sweetalert2';\nexport default {\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    onMounted(() => {\n      store.dispatch('cart/cartCount');\n      store.dispatch('cart/cartTotal');\n      store.dispatch('cart/cartWeight');\n    });\n    const carts = computed(() => {\n      return store.getters['cart/getCart'];\n    });\n    const cartCount = computed(() => {\n      return store.getters['cart/cartCount'];\n    });\n    const cartTotal = computed(() => {\n      return store.state.cart.cartTotal;\n    });\n    const cartWeight = computed(() => {\n      return store.state.cart.cartWeight;\n    });\n\n    const removeCart = cart_id => {\n      store.dispatch('cart/removeCart', cart_id);\n    };\n\n    const state = reactive({\n      name: '',\n      phone: '',\n      address: '',\n      provinces: [],\n      province_id: '',\n      cities: [],\n      city_id: '',\n      courier: false,\n      courier_type: '',\n      cost: false,\n      costs: '',\n      costService: '',\n      courier_cost: 0,\n      courier_service: '',\n      buttonCheckout: false,\n      grandTotal: 0\n    });\n    const validation = reactive({\n      name: false,\n      phone: false,\n      address: false\n    });\n    const provinces = onMounted(() => {\n      Api.get('/rajaongkir/provinces').then(response => {\n        state.provinces = response.data.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    });\n\n    const getCities = () => {\n      Api.get('/rajaongkir/cities', {\n        params: {\n          province_id: state.province_id\n        }\n      }).then(response => {\n        state.cities = response.data.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    const getCourier = () => {\n      state.courier = true;\n    };\n\n    const getOngkir = () => {\n      if (cartWeight.value == 0) {\n        Swal.fire({\n          title: \"Oops...\",\n          text: \"Silahkan pilih produk terlebih dahulu!\",\n          icon: \"error\"\n        });\n        return;\n      }\n\n      Swal.fire({\n        title: 'Loading...',\n        text: 'Silahkan tunggu beberapa saat!',\n        icon: \"info\",\n        allowEscapeKey: false,\n        allowOutsideClick: false,\n        didOpen: () => {\n          Swal.showLoading();\n        }\n      });\n      Api.post('/rajaongkir/checkOngkir', {\n        city_destination: state.city_id,\n        weight: cartWeight.value,\n        courier: state.courier_type\n      }).then(response => {\n        Swal.close();\n        state.cost = true;\n        state.costs = response.data.data[0].costs;\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    const getCostService = () => {\n      let shipping = state.costService.split(\"|\");\n      state.courier_cost = shipping[0];\n      state.courier_service = shipping[1];\n      const token = store.state.auth.token;\n      Api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      Api.get('cart/total').then(response => {\n        state.grandTotal = parseInt(response.data.total) + parseInt(state.courier_cost);\n      });\n      state.buttonCheckout = true;\n    };\n\n    const checkout = () => {\n      if (state.name && state.phone && state.address && cartWeight.value) {\n        let data = {\n          name: state.name,\n          phone: state.phone,\n          province_id: state.province_id,\n          city_id: state.city_id,\n          courier_type: state.courier_type,\n          courier_service: state.courier_service,\n          courier_cost: state.courier_cost,\n          weight: cartWeight.value,\n          address: state.address,\n          grandTotal: state.grandTotal\n        };\n        Swal.fire({\n          title: 'Loading...',\n          text: 'Please wait a moment!',\n          icon: \"info\",\n          allowEscapeKey: false,\n          allowOutsideClick: false,\n          didOpen: () => {\n            Swal.showLoading();\n          }\n        });\n        store.dispatch('cart/checkout', data).then(response => {\n          Swal.close();\n          router.push({\n            name: 'detail_order',\n            params: {\n              snap_token: response[0].snap_token\n            }\n          });\n          Swal.fire({\n            title: \"Success\",\n            text: \"Checkout Successful.\",\n            icon: \"success\",\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      if (!state.name) {\n        validation.name = true;\n      }\n\n      if (!state.phone) {\n        validation.phone = true;\n      }\n\n      if (!state.address) {\n        validation.address = true;\n      }\n    };\n\n    return {\n      carts,\n      cartCount,\n      cartTotal,\n      cartWeight,\n      removeCart,\n      state,\n      validation,\n      provinces,\n      getCities,\n      getCourier,\n      getOngkir,\n      getCostService,\n      checkout\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAmSA,OAAOA,GAAP,MAAgB,eAAhB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,QAA9B,QAA8C,KAA9C;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEA,eAAe;AACXC,OAAK,GAAG;AACJ,UAAMC,KAAI,GAAIJ,QAAQ,EAAtB;AAEA,UAAMK,MAAK,GAAIJ,SAAS,EAAxB;AAEAJ,aAAS,CAAC,MAAM;AACZO,WAAK,CAACE,QAAN,CAAe,gBAAf;AACAF,WAAK,CAACE,QAAN,CAAe,gBAAf;AACAF,WAAK,CAACE,QAAN,CAAe,iBAAf;AACH,KAJQ,CAAT;AAMA,UAAMC,KAAI,GAAIT,QAAQ,CAAC,MAAM;AACzB,aAAOM,KAAK,CAACI,OAAN,CAAc,cAAd,CAAP;AACH,KAFqB,CAAtB;AAIA,UAAMC,SAAQ,GAAIX,QAAQ,CAAC,MAAM;AAC7B,aAAOM,KAAK,CAACI,OAAN,CAAc,gBAAd,CAAP;AACH,KAFyB,CAA1B;AAIA,UAAME,SAAQ,GAAIZ,QAAQ,CAAC,MAAM;AAC7B,aAAOM,KAAK,CAACO,KAAN,CAAYC,IAAZ,CAAiBF,SAAxB;AACH,KAFyB,CAA1B;AAIA,UAAMG,UAAS,GAAIf,QAAQ,CAAC,MAAM;AAC9B,aAAOM,KAAK,CAACO,KAAN,CAAYC,IAAZ,CAAiBC,UAAxB;AACH,KAF0B,CAA3B;;AAIA,UAAMC,UAAS,GAAKC,OAAD,IAAa;AAC5BX,WAAK,CAACE,QAAN,CAAe,iBAAf,EAAkCS,OAAlC;AACJ,KAFA;;AAIA,UAAMJ,KAAI,GAAIZ,QAAQ,CAAC;AACnBiB,UAAI,EAAE,EADa;AAEnBC,WAAK,EAAE,EAFY;AAGnBC,aAAO,EAAE,EAHU;AAInBC,eAAS,EAAE,EAJQ;AAKnBC,iBAAW,EAAE,EALM;AAMnBC,YAAM,EAAE,EANW;AAOnBC,aAAO,EAAE,EAPU;AAQnBC,aAAO,EAAE,KARU;AASnBC,kBAAY,EAAE,EATK;AAUnBC,UAAI,EAAE,KAVa;AAWnBC,WAAK,EAAE,EAXY;AAYnBC,iBAAW,EAAE,EAZM;AAanBC,kBAAY,EAAE,CAbK;AAcnBC,qBAAe,EAAE,EAdE;AAenBC,oBAAc,EAAE,KAfG;AAgBnBC,gBAAU,EAAE;AAhBO,KAAD,CAAtB;AAmBA,UAAMC,UAAS,GAAIjC,QAAQ,CAAC;AACxBiB,UAAI,EAAE,KADkB;AAExBC,WAAK,EAAE,KAFiB;AAGxBC,aAAO,EAAE;AAHe,KAAD,CAA3B;AAMA,UAAMC,SAAQ,GAAItB,SAAS,CAAC,MAAM;AAC9BD,SAAG,CAACqC,GAAJ,CAAQ,uBAAR,EACKC,IADL,CACUC,QAAO,IAAK;AACdxB,aAAK,CAACQ,SAAN,GAAkBgB,QAAQ,CAACC,IAAT,CAAcA,IAAhC;AACH,OAHL,EAGOC,KAHP,CAGaC,KAAI,IAAK;AACdC,eAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OALL;AAMH,KAP0B,CAA3B;;AASA,UAAMG,SAAQ,GAAI,MAAM;AACpB7C,SAAG,CAACqC,GAAJ,CAAQ,oBAAR,EAA8B;AAC1BS,cAAM,EAAE;AACJtB,qBAAW,EAAET,KAAK,CAACS;AADf;AADkB,OAA9B,EAKKc,IALL,CAKUC,QAAO,IAAK;AACdxB,aAAK,CAACU,MAAN,GAAec,QAAQ,CAACC,IAAT,CAAcA,IAA7B;AACH,OAPL,EAOOC,KAPP,CAOaC,KAAI,IAAK;AACdC,eAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OATL;AAUJ,KAXA;;AAaA,UAAMK,UAAS,GAAI,MAAM;AACrBhC,WAAK,CAACY,OAAN,GAAgB,IAAhB;AACJ,KAFA;;AAIA,UAAMqB,SAAQ,GAAI,MAAM;AACpB,UAAI/B,UAAU,CAACgC,KAAX,IAAoB,CAAxB,EAA2B;AACvB3C,YAAI,CAAC4C,IAAL,CAAU;AACNC,eAAK,EAAE,SADD;AAENC,cAAI,EAAE,wCAFA;AAGNC,cAAI,EAAE;AAHA,SAAV;AAKA;AACJ;;AAEA/C,UAAI,CAAC4C,IAAL,CAAU;AACNC,aAAK,EAAE,YADD;AAENC,YAAI,EAAE,gCAFA;AAGNC,YAAI,EAAE,MAHA;AAINC,sBAAc,EAAE,KAJV;AAKNC,yBAAiB,EAAE,KALb;AAMNC,eAAO,EAAE,MAAM;AACXlD,cAAI,CAACmD,WAAL;AACJ;AARM,OAAV;AAUAzD,SAAG,CAAC0D,IAAJ,CAAS,yBAAT,EAAoC;AAChCC,wBAAgB,EAAE5C,KAAK,CAACW,OADQ;AAEhCkC,cAAM,EAAE3C,UAAU,CAACgC,KAFa;AAGhCtB,eAAO,EAAEZ,KAAK,CAACa;AAHiB,OAApC,EAKKU,IALL,CAKUC,QAAO,IAAK;AACdjC,YAAI,CAACuD,KAAL;AACA9C,aAAK,CAACc,IAAN,GAAa,IAAb;AAEAd,aAAK,CAACe,KAAN,GAAcS,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmB,CAAnB,EAAsBV,KAApC;AACH,OAVL,EAUOW,KAVP,CAUaC,KAAI,IAAK;AACdC,eAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAZL;AAaJ,KAjCA;;AAmCA,UAAMoB,cAAa,GAAI,MAAM;AACzB,UAAIC,QAAO,GAAIhD,KAAK,CAACgB,WAAN,CAAkBiC,KAAlB,CAAwB,GAAxB,CAAf;AAEAjD,WAAK,CAACiB,YAAN,GAAqB+B,QAAQ,CAAC,CAAD,CAA7B;AACAhD,WAAK,CAACkB,eAAN,GAAwB8B,QAAQ,CAAC,CAAD,CAAhC;AAEA,YAAME,KAAI,GAAIzD,KAAK,CAACO,KAAN,CAAYmD,IAAZ,CAAiBD,KAA/B;AAEAjE,SAAG,CAACmE,QAAJ,CAAaC,OAAb,CAAqBC,MAArB,CAA4B,eAA5B,IAAgD,UAASJ,KAAM,EAA/D;AAEAjE,SAAG,CAACqC,GAAJ,CAAQ,YAAR,EACKC,IADL,CACUC,QAAO,IAAK;AACdxB,aAAK,CAACoB,UAAN,GAAmBmC,QAAQ,CAAC/B,QAAQ,CAACC,IAAT,CAAc+B,KAAf,CAAR,GAAgCD,QAAQ,CAACvD,KAAK,CAACiB,YAAP,CAA3D;AACH,OAHL;AAKAjB,WAAK,CAACmB,cAAN,GAAuB,IAAvB;AACJ,KAhBA;;AAkBA,UAAMsC,QAAO,GAAI,MAAM;AACnB,UAAIzD,KAAK,CAACK,IAAN,IAAcL,KAAK,CAACM,KAApB,IAA6BN,KAAK,CAACO,OAAnC,IAA8CL,UAAU,CAACgC,KAA7D,EAAoE;AAChE,YAAIT,IAAG,GAAI;AACPpB,cAAI,EAAEL,KAAK,CAACK,IADL;AAEPC,eAAK,EAAEN,KAAK,CAACM,KAFN;AAGPG,qBAAW,EAAET,KAAK,CAACS,WAHZ;AAIPE,iBAAO,EAAEX,KAAK,CAACW,OAJR;AAKPE,sBAAY,EAAEb,KAAK,CAACa,YALb;AAMPK,yBAAe,EAAElB,KAAK,CAACkB,eANhB;AAOPD,sBAAY,EAAEjB,KAAK,CAACiB,YAPb;AAQP4B,gBAAM,EAAE3C,UAAU,CAACgC,KARZ;AASP3B,iBAAO,EAAEP,KAAK,CAACO,OATR;AAUPa,oBAAU,EAAEpB,KAAK,CAACoB;AAVX,SAAX;AAaA7B,YAAI,CAAC4C,IAAL,CAAU;AACNC,eAAK,EAAE,YADD;AAENC,cAAI,EAAE,uBAFA;AAGNC,cAAI,EAAE,MAHA;AAINC,wBAAc,EAAE,KAJV;AAKNC,2BAAiB,EAAE,KALb;AAMNC,iBAAO,EAAE,MAAM;AACXlD,gBAAI,CAACmD,WAAL;AACJ;AARM,SAAV;AAUAjD,aAAK,CAACE,QAAN,CAAe,eAAf,EAAgC8B,IAAhC,EACKF,IADL,CACUC,QAAO,IAAK;AACdjC,cAAI,CAACuD,KAAL;AACApD,gBAAM,CAACgE,IAAP,CAAY;AACRrD,gBAAI,EAAE,cADE;AAER0B,kBAAM,EAAE;AACJ4B,wBAAU,EAAEnC,QAAQ,CAAC,CAAD,CAAR,CAAYmC;AADpB;AAFA,WAAZ;AAMApE,cAAI,CAAC4C,IAAL,CAAU;AACNC,iBAAK,EAAE,SADD;AAENC,gBAAI,EAAE,sBAFA;AAGNC,gBAAI,EAAE,SAHA;AAINsB,6BAAiB,EAAE,KAJb;AAKNC,iBAAK,EAAE;AALD,WAAV;AAOH,SAhBL,EAgBOnC,KAhBP,CAgBaC,KAAI,IAAK;AACdC,iBAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,SAlBL;AAmBJ;;AAEA,UAAI,CAAC3B,KAAK,CAACK,IAAX,EAAiB;AACbgB,kBAAU,CAAChB,IAAX,GAAkB,IAAlB;AACJ;;AAEA,UAAI,CAACL,KAAK,CAACM,KAAX,EAAkB;AACde,kBAAU,CAACf,KAAX,GAAmB,IAAnB;AACJ;;AAEA,UAAI,CAACN,KAAK,CAACO,OAAX,EAAoB;AAChBc,kBAAU,CAACd,OAAX,GAAqB,IAArB;AACJ;AACJ,KAzDA;;AA2DA,WAAO;AACHX,WADG;AAEHE,eAFG;AAGHC,eAHG;AAIHG,gBAJG;AAKHC,gBALG;AAMHH,WANG;AAOHqB,gBAPG;AAQHb,eARG;AASHsB,eATG;AAUHE,gBAVG;AAWHC,eAXG;AAYHc,oBAZG;AAaHU;AAbG,KAAP;AAeJ;;AAlNW,CAAf","names":["Api","onMounted","computed","reactive","useStore","useRouter","Swal","setup","store","router","dispatch","carts","getters","cartCount","cartTotal","state","cart","cartWeight","removeCart","cart_id","name","phone","address","provinces","province_id","cities","city_id","courier","courier_type","cost","costs","costService","courier_cost","courier_service","buttonCheckout","grandTotal","validation","get","then","response","data","catch","error","console","log","getCities","params","getCourier","getOngkir","value","fire","title","text","icon","allowEscapeKey","allowOutsideClick","didOpen","showLoading","post","city_destination","weight","close","getCostService","shipping","split","token","auth","defaults","headers","common","parseInt","total","checkout","push","snap_token","showConfirmButton","timer"],"sourceRoot":"","sources":["/Users/benmehidilarbi/Desktop/online-shop-main/src/views/cart/Index.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid mb-5 mt-4\">\n        <div class=\"row\">\n            <div class=\"col-md-6\">\n                <div class=\"card border-0 shadow rounded\">\n                    <div class=\"card-body\">\n                        <h5>\n                            <i class=\"fa fa-shopping-cart\"></i> Order Details\n                        </h5>\n                        <hr style=\"border-top: 3px solid rgb(154 155 156);border-radius:.5rem\" />\n                        <div v-if=\"cartCount >= 1\">\n                            <table class=\"table\">\n                                <tbody>\n                                    <tr v-for=\"cart in carts\" :key=\"cart.id\">\n                                        <td class=\"b-none\" width=\"25%\">\n                                            <div class=\"wrapper-image-cart\">\n                                                <img\n                                                    :src=\"cart.product.image\"\n                                                    style=\"width: 100%;border-radius: .5rem\"\n                                                />\n                                            </div>\n                                        </td>\n                                        <td class=\"b-none\" width=\"50%\">\n                                            <h5>\n                                                <b>{{ cart.product.title }}</b>\n                                            </h5>\n                                            <table class=\"table-borderless\" style=\"font-size: 14px\">\n                                                <tr>\n                                                    <td style=\"padding: .20rem\">Qty</td>\n                                                    <td style=\"padding: .20rem\">:</td>\n                                                    <td style=\"padding: .20rem\">\n                                                        <b>{{ cart.quantity }}</b>\n                                                    </td>\n                                                </tr>\n                                            </table>\n                                        </td>\n                                        <td class=\"b-none text-right\">\n                                            <p class=\"m-0 fw-bold\">$ {{ moneyFormat(cart.price) }}</p>\n                                            <p class=\"m-0\">\n                                                <s style=\"text-decoration-color:red\">\n                                                    $\n                                                    {{ moneyFormat(cart.product.price * cart.quantity) }}\n                                                </s>\n                                            </p>\n                                            <br />\n                                            <div class=\"text-right\">\n                                                <button\n                                                    @click.prevent=\"removeCart(cart.id)\"\n                                                    class=\"btn btn-sm btn-danger\"\n                                                >\n                                                    <i class=\"fa fa-trash\"></i>\n                                                </button>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                            <table class=\"table table-default\">\n                                <tbody>\n                                    <tr>\n                                        <td class=\"set-td text-left\" width=\"60%\">\n                                            <p class=\"m-0\">Total</p>\n                                        </td>\n                                        <td class=\"set-td text-right\" width=\"30%\">&nbsp; : $</td>\n                                        <td class=\"text-right set-td\">\n                                            <p\n                                                class=\"m-0\"\n                                                id=\"subtotal\"\n                                            >{{ moneyFormat(cartTotal) }}</p>\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td class=\"set-td text-left border-0\">\n                                            <p class=\"m-0\">\n                                                Shipping cost (\n                                                <strong>{{ cartWeight }}</strong> gram)\n                                            </p>\n                                        </td>\n                                        <td class=\"set-td border-0 text-right\">&nbsp; : $</td>\n                                        <td class=\"set-td border-0 text-right\">\n                                            <p\n                                                class=\"m-0\"\n                                                id=\"ongkir-cart\"\n                                            >{{ moneyFormat(state.courier_cost) }}</p>\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td class=\"text-left border-0\">\n                                            <p class=\"fw-bold m-0 h5\">Grand Total</p>\n                                        </td>\n                                        <td class=\"border-0 text-right\">&nbsp; : $</td>\n                                        <td class=\"border-0 text-right\">\n                                            <p\n                                                class=\"fw-bold m-0 h5\"\n                                                align=\"right\"\n                                            >{{ moneyFormat(state.grandTotal) }}</p>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                        <div v-else class=\"mt-3 text-center\">\n                            <img src=\"../../assets/empty-products.svg\" style=\"width: 250px\" />\n                            <p\n                                class=\"fs-5 mt-3 fw-bold\"\n                            >Looks like you don't have any products in your cart yet.</p>\n                            <router-link\n                                :to=\"{ name: 'home' }\"\n                                class=\"btn btn-primary btn-md shadow-md\"\n                            >\n                                <i class=\"fa fa-long-arrow-alt-left\"></i> Home\n                            </router-link>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6 mt-3 mt-md-0\">\n                <div class=\"card border-0 shadow rounded\">\n                    <div class=\"card-body\">\n                        <h5>\n                            <i class=\"fa fa-user-circle\"></i> Delivery Details\n                        </h5>\n                        <hr style=\"border-top: 3px solid rgb(154 155 156);border-radius:.5rem\" />\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"form-group\">\n                                    <label class=\"fw-bold mb-1\">Full name</label>\n                                    <input\n                                        type=\"text\"\n                                        class=\"form-control\"\n                                        id=\"nama_lengkap\"\n                                        placeholder=\"Full name\"\n                                        v-model=\"state.name\"\n                                    />\n                                    <div\n                                        v-if=\"validation.name\"\n                                        class=\"mt-2 alert alert-danger\"\n                                    >Enter Full Name</div>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6 mt-3 mt-md-0\">\n                                <div class=\"form-group\">\n                                    <label class=\"fw-bold mb-1\">No. Hp / Whatsapp</label>\n                                    <input\n                                        type=\"number\"\n                                        class=\"form-control\"\n                                        id=\"phone\"\n                                        placeholder=\"No. HP / WhatsApp\"\n                                        v-model=\"state.phone\"\n                                    />\n                                    <div\n                                        v-if=\"validation.phone\"\n                                        class=\"mt-2 alert alert-danger\"\n                                    >Enter phone number</div>\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mt-3\">\n                                <div class=\"form-group\">\n                                    <label class=\"fw-bold mb-1\">Province</label>\n                                    <select\n                                        class=\"form-control\"\n                                        v-model=\"state.province_id\"\n                                        @change=\"getCities\"\n                                    >\n                                        <option value>-- Select Province--</option>\n                                        <option\n                                            v-for=\"province in state.provinces\"\n                                            :key=\"province.id\"\n                                            :value=\"province.province_id\"\n                                        >{{ province.name }}</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mt-3\">\n                                <div class=\"form-group\">\n                                    <label class=\"fw-bold mb-1\">County / town</label>\n                                    <select\n                                        class=\"form-control\"\n                                        v-model=\"state.city_id\"\n                                        @change=\"getCourier\"\n                                    >\n                                        <option value>-- Select City --</option>\n                                        <option\n                                            v-for=\"city in state.cities\"\n                                            :key=\"city.id\"\n                                            :value=\"city.city_id\"\n                                        >{{ city.name }}</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mt-3\">\n                                <div class=\"form-group\" v-if=\"state.courier\">\n                                    <label class=\"fw-bold mb-1\">Delivery Courier</label>\n                                    <br />\n                                    <div class=\"form-check form-check-inline\">\n                                        <input\n                                            class=\"form-check-input select-courier me-1\"\n                                            type=\"radio\"\n                                            name=\"courier\"\n                                            id=\"ongkos_kirim-tiki\"\n                                            value=\"tiki\"\n                                            v-model=\"state.courier_type\"\n                                            @change=\"getOngkir\"\n                                            style=\"cursor: pointer\"\n                                        />\n                                        <label\n                                            class=\"form-check-label fw-bold me-2\"\n                                            for=\"ongkos_kirim-tiki\"\n                                            style=\"cursor: pointer\"\n                                        >TIKI</label>\n                                    </div>\n                                    <div class=\"form-check form-check-inline\">\n                                        <input\n                                            class=\"form-check-input select-courier me-1\"\n                                            type=\"radio\"\n                                            name=\"courier\"\n                                            id=\"ongkos_kirim-pos\"\n                                            value=\"pos\"\n                                            v-model=\"state.courier_type\"\n                                            @change=\"getOngkir\"\n                                            style=\"cursor: pointer\"\n                                        />\n                                        <label\n                                            class=\"form-check-label fw-bold\"\n                                            for=\"ongkos_kirim-pos\"\n                                            style=\"cursor: pointer\"\n                                        >POS</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mt-1\">\n                                <div class=\"form-group\" v-if=\"state.cost\">\n                                    <hr\n                                        style=\"border-top: 3px solid rgb(154 155 156);border-radius:.5rem\"\n                                    />\n                                    <label class=\"fw-bold mb-1\">Service Kurir</label>\n                                    <br />\n                                    <div\n                                        v-for=\"value in state.costs\"\n                                        :key=\"value.service\"\n                                        class=\"form-check form-check-inline\"\n                                    >\n                                        <input\n                                            class=\"form-check-input\"\n                                            type=\"radio\"\n                                            name=\"cost\"\n                                            :id=\"value.service\"\n                                            :value=\"value.cost[0].value + '|' + value.service\"\n                                            v-model=\"state.costService\"\n                                            @change=\"getCostService\"\n                                            style=\"cursor: pointer\"\n                                        />\n                                        <label\n                                            class=\"form-check-label font-weight-normal me-5\"\n                                            :for=\"value.service\"\n                                            style=\"cursor: pointer\"\n                                        >{{ value.service }} - $ {{ moneyFormat(value.cost[0].value) }}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mt-3\">\n                                <div class=\"form-group\">\n                                    <label class=\"fw-bold mb-1\">Alamat Lengkap</label>\n                                    <textarea\n                                        class=\"form-control\"\n                                        id=\"alamat\"\n                                        rows=\"3\"\n                                        placeholder=\"Full Address&#10;&#10;Example: 35 Rue Verollot Villejuif France 94800\"\n                                        v-model=\"state.address\"\n                                    ></textarea>\n                                    <div\n                                        v-if=\"validation.address\"\n                                        class=\"mt-2 alert alert-danger\"\n                                    >Enter Full Address</div>\n                                </div>\n                            </div>\n                            <div v-if=\"state.buttonCheckout\" class=\"col-md-12 mt-3\">\n                                <button\n                                    @click.prevent=\"checkout\"\n                                    class=\"btn btn-primary btn-lg w-100\"\n                                >Checkout</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Api from '../../api/Api'\nimport { onMounted, computed, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport Swal from 'sweetalert2'\n\nexport default {\n    setup() {\n        const store = useStore()\n\n        const router = useRouter()\n\n        onMounted(() => {\n            store.dispatch('cart/cartCount')\n            store.dispatch('cart/cartTotal')\n            store.dispatch('cart/cartWeight')\n        })\n\n        const carts = computed(() => {\n            return store.getters['cart/getCart']\n        })\n\n        const cartCount = computed(() => {\n            return store.getters['cart/cartCount']\n        })\n\n        const cartTotal = computed(() => {\n            return store.state.cart.cartTotal\n        })\n\n        const cartWeight = computed(() => {\n            return store.state.cart.cartWeight\n        })\n\n        const removeCart = (cart_id) => {\n            store.dispatch('cart/removeCart', cart_id)\n        }\n\n        const state = reactive({\n            name: '',\n            phone: '',\n            address: '',\n            provinces: [],\n            province_id: '',\n            cities: [],\n            city_id: '',\n            courier: false,\n            courier_type: '',\n            cost: false,\n            costs: '',\n            costService: '',\n            courier_cost: 0,\n            courier_service: '',\n            buttonCheckout: false,\n            grandTotal: 0\n        })\n\n        const validation = reactive({\n            name: false,\n            phone: false,\n            address: false\n        })\n\n        const provinces = onMounted(() => {\n            Api.get('/rajaongkir/provinces')\n                .then(response => {\n                    state.provinces = response.data.data\n                }).catch(error => {\n                    console.log(error)\n                })\n        })\n\n        const getCities = () => {\n            Api.get('/rajaongkir/cities', {\n                params: {\n                    province_id: state.province_id\n                }\n            })\n                .then(response => {\n                    state.cities = response.data.data\n                }).catch(error => {\n                    console.log(error)\n                })\n        }\n\n        const getCourier = () => {\n            state.courier = true\n        }\n\n        const getOngkir = () => {\n            if (cartWeight.value == 0) {\n                Swal.fire({\n                    title: \"Oops...\",\n                    text: \"Silahkan pilih produk terlebih dahulu!\",\n                    icon: \"error\",\n                });\n                return\n            }\n\n            Swal.fire({\n                title: 'Loading...',\n                text: 'Silahkan tunggu beberapa saat!',\n                icon: \"info\",\n                allowEscapeKey: false,\n                allowOutsideClick: false,\n                didOpen: () => {\n                    Swal.showLoading()\n                }\n            })\n            Api.post('/rajaongkir/checkOngkir', {\n                city_destination: state.city_id,\n                weight: cartWeight.value,\n                courier: state.courier_type\n            })\n                .then(response => {\n                    Swal.close()\n                    state.cost = true\n\n                    state.costs = response.data.data[0].costs\n                }).catch(error => {\n                    console.log(error)\n                })\n        }\n\n        const getCostService = () => {\n            let shipping = state.costService.split(\"|\")\n\n            state.courier_cost = shipping[0]\n            state.courier_service = shipping[1]\n\n            const token = store.state.auth.token\n\n            Api.defaults.headers.common['Authorization'] = `Bearer ${token}`\n\n            Api.get('cart/total')\n                .then(response => {\n                    state.grandTotal = parseInt(response.data.total) + parseInt(state.courier_cost)\n                })\n\n            state.buttonCheckout = true\n        }\n\n        const checkout = () => {\n            if (state.name && state.phone && state.address && cartWeight.value) {\n                let data = {\n                    name: state.name,\n                    phone: state.phone,\n                    province_id: state.province_id,\n                    city_id: state.city_id,\n                    courier_type: state.courier_type,\n                    courier_service: state.courier_service,\n                    courier_cost: state.courier_cost,\n                    weight: cartWeight.value,\n                    address: state.address,\n                    grandTotal: state.grandTotal\n                }\n\n                Swal.fire({\n                    title: 'Loading...',\n                    text: 'Please wait a moment!',\n                    icon: \"info\",\n                    allowEscapeKey: false,\n                    allowOutsideClick: false,\n                    didOpen: () => {\n                        Swal.showLoading()\n                    }\n                })\n                store.dispatch('cart/checkout', data)\n                    .then(response => {\n                        Swal.close()\n                        router.push({\n                            name: 'detail_order',\n                            params: {\n                                snap_token: response[0].snap_token\n                            }\n                        })\n                        Swal.fire({\n                            title: \"Success\",\n                            text: \"Checkout Successful.\",\n                            icon: \"success\",\n                            showConfirmButton: false,\n                            timer: 1500\n                        });\n                    }).catch(error => {\n                        console.log(error)\n                    })\n            }\n\n            if (!state.name) {\n                validation.name = true\n            }\n\n            if (!state.phone) {\n                validation.phone = true\n            }\n\n            if (!state.address) {\n                validation.address = true\n            }\n        }\n\n        return {\n            carts,\n            cartCount,\n            cartTotal,\n            cartWeight,\n            removeCart,\n            state,\n            validation,\n            provinces,\n            getCities,\n            getCourier,\n            getOngkir,\n            getCostService,\n            checkout,\n        }\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}